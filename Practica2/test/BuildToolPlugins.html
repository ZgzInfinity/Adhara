<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Build Tool Plugins</title>
<link rel="stylesheet" href="css/spring.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body id="build-tool-plugins" class="book toc2 toc-left">
<div id="header">
<h1>Build Tool Plugins</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#build-tool-plugins-maven-plugin">1. Spring Boot Maven Plugin</a>
<ul class="sectlevel2">
<li><a href="#build-tool-plugins-include-maven-plugin">1.1. Including the Plugin</a></li>
<li><a href="#build-tool-plugins-maven-packaging">1.2. Packaging Executable Jar and War Files</a></li>
</ul>
</li>
<li><a href="#build-tool-plugins-gradle-plugin">2. Spring Boot Gradle Plugin</a></li>
<li><a href="#build-tool-plugins-antlib">3. Spring Boot AntLib Module</a>
<ul class="sectlevel2">
<li><a href="#spring-boot-ant-tasks">3.1. Spring Boot Ant Tasks</a>
<ul class="sectlevel3">
<li><a href="#spring-boot-ant-exejar">3.1.1. <code>spring-boot:exejar</code></a></li>
<li><a href="#spring-boot-ant-exejar-examples">3.1.2. Examples</a></li>
</ul>
</li>
<li><a href="#spring-boot-ant-findmainclass">3.2. <code>spring-boot:findmainclass</code></a>
<ul class="sectlevel3">
<li><a href="#spring-boot-ant-findmainclass-examples">3.2.1. Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#build-tool-plugins-other-build-systems">4. Supporting Other Build Systems</a>
<ul class="sectlevel2">
<li><a href="#build-tool-plugins-repackaging-archives">4.1. Repackaging Archives</a></li>
<li><a href="#build-tool-plugins-nested-libraries">4.2. Nested Libraries</a></li>
<li><a href="#build-tool-plugins-find-a-main-class">4.3. Finding a Main Class</a></li>
<li><a href="#build-tool-plugins-repackage-implementation">4.4. Example Repackage Implementation</a></li>
</ul>
</li>
<li><a href="#build-tool-plugins-whats-next">5. What to Read Next</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Spring Boot provides build tool plugins for Maven and Gradle.
The plugins offer a variety of features, including the packaging of executable jars.
This section provides more details on both plugins as well as some help should you need to extend an unsupported build system.
If you are just getting started, you might want to read &#8220;<a href="using-spring-boot.html#using-boot-build-systems">using-spring-boot.html</a>&#8221; from the &#8220;<a href="using-spring-boot.html#using-boot">using-spring-boot.html</a>&#8221; section first.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-tool-plugins-maven-plugin"><a class="anchor" href="#build-tool-plugins-maven-plugin"></a>1. Spring Boot Maven Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Spring Boot Maven Plugin provides Spring Boot support in Maven, letting you package executable jar or war archives and run an application &#8220;in-place&#8221;.
To use it, you must use Maven 3.2 (or later).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See the <a href="https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/maven-plugin/">Spring Boot Maven Plugin Site</a> for complete plugin documentation.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-include-maven-plugin"><a class="anchor" href="#build-tool-plugins-include-maven-plugin"></a>1.1. Including the Plugin</h3>
<div class="paragraph">
<p>To use the Spring Boot Maven Plugin, include the appropriate XML in the <code>plugins</code> section of your <code>pom.xml</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;!-- ... --&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.2.2.RELEASE&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;repackage&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding configuration repackages a jar or war that is built during the <code>package</code> phase of the Maven lifecycle.
The following example shows both the repackaged jar as well as the original jar in the <code>target</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn package
$ ls target/*.jar
target/myproject-1.0.0.jar target/myproject-1.0.0.jar.original</pre>
</div>
</div>
<div class="paragraph">
<p>If you do not include the <code>&lt;execution/&gt;</code> configuration, as shown in the prior example, you can run the plugin on its own (but only if the package goal is used as well), as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn package spring-boot:repackage
$ ls target/*.jar
target/myproject-1.0.0.jar target/myproject-1.0.0.jar.original</pre>
</div>
</div>
<div class="paragraph">
<p>If you use a milestone or snapshot release, you also need to add the appropriate <code>pluginRepository</code> elements, as shown in the following listing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
        &lt;id&gt;spring-snapshots&lt;/id&gt;
        &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;
    &lt;/pluginRepository&gt;
    &lt;pluginRepository&gt;
        &lt;id&gt;spring-milestones&lt;/id&gt;
        &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
    &lt;/pluginRepository&gt;
&lt;/pluginRepositories&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-maven-packaging"><a class="anchor" href="#build-tool-plugins-maven-packaging"></a>1.2. Packaging Executable Jar and War Files</h3>
<div class="paragraph">
<p>Once <code>spring-boot-maven-plugin</code> has been included in your <code>pom.xml</code>, it automatically tries to rewrite archives to make them executable by using the <code>spring-boot:repackage</code> goal.
You should configure your project to build a jar or war (as appropriate) by using the usual <code>packaging</code> element, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;!-- ... --&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;!-- ... --&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your existing archive is enhanced by Spring Boot during the <code>package</code> phase.
The main class that you want to launch can be specified either by using a configuration option, as shown below, or by adding a <code>Main-Class</code> attribute to the manifest.
If you do not specify a main class, the plugin searches for a class with a <code>public static void main(String[] args)</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        &lt;mainClass&gt;com.example.app.Main&lt;/mainClass&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To build and run a project artifact, you can type the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn package
$ java -jar target/mymodule-0.0.1-SNAPSHOT.jar</pre>
</div>
</div>
<div class="paragraph">
<p>To build a war file that is both executable and deployable into an external container, you need to mark the embedded container dependencies as &#8220;provided&#8221;, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;!-- ... --&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;
    &lt;!-- ... --&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;!-- ... --&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See the &#8220;<a href="howto.html#howto-create-a-deployable-war-file">howto.html</a>&#8221; section for more details on how to create a deployable war file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Advanced configuration options and examples are available in the <a href="https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/maven-plugin/">plugin info page</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-tool-plugins-gradle-plugin"><a class="anchor" href="#build-tool-plugins-gradle-plugin"></a>2. Spring Boot Gradle Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Spring Boot Gradle Plugin provides Spring Boot support in Gradle, letting you package executable jar or war archives, run Spring Boot applications, and use the dependency management provided by <code>spring-boot-dependencies</code>.
It requires Gradle 5.x (4.10 is also supported but this support is deprecated and will be removed in a future release).
Please refer to the plugin&#8217;s documentation to learn more:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reference (<a href="https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/gradle-plugin/reference/html/">HTML</a> and <a href="https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/gradle-plugin/reference/pdf/spring-boot-gradle-plugin-reference.pdf">PDF</a>)</p>
</li>
<li>
<p><a href="https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/gradle-plugin/reference/api/">API</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-tool-plugins-antlib"><a class="anchor" href="#build-tool-plugins-antlib"></a>3. Spring Boot AntLib Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Spring Boot AntLib module provides basic Spring Boot support for Apache Ant.
You can use the module to create executable jars.
To use the module, you need to declare an additional <code>spring-boot</code> namespace in your <code>build.xml</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project xmlns:ivy="antlib:org.apache.ivy.ant"
    xmlns:spring-boot="antlib:org.springframework.boot.ant"
    name="myapp" default="build"&gt;
    ...
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to remember to start Ant using the <code>-lib</code> option, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ant -lib &lt;folder containing spring-boot-antlib-2.2.2.RELEASE.jar&gt;</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The &#8220;Using Spring Boot&#8221; section includes a more complete example of <a href="using-spring-boot.html#using-boot-ant">using Apache Ant with <code>spring-boot-antlib</code></a>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="spring-boot-ant-tasks"><a class="anchor" href="#spring-boot-ant-tasks"></a>3.1. Spring Boot Ant Tasks</h3>
<div class="paragraph">
<p>Once the <code>spring-boot-antlib</code> namespace has been declared, the following additional tasks are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-boot-ant-exejar"><code>spring-boot:exejar</code></a></p>
</li>
<li>
<p><a href="#spring-boot-ant-findmainclass"><code>spring-boot:findmainclass</code></a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="spring-boot-ant-exejar"><a class="anchor" href="#spring-boot-ant-exejar"></a>3.1.1. <code>spring-boot:exejar</code></h4>
<div class="paragraph">
<p>You can use the <code>exejar</code> task to create a Spring Boot executable jar.
The following attributes are supported by the task:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>destfile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The destination jar file to create</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>classes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The root directory of Java class files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>start-class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The main application class to run</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No <em>(the default is the first class found that declares a <code>main</code> method)</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following nested elements can be used with the task:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more <a href="https://ant.apache.org/manual/Types/resources.html#collection">Resource Collections</a> describing a set of <a href="https://ant.apache.org/manual/Types/resources.html">Resources</a> that should be added to the content of the created jar file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more <a href="https://ant.apache.org/manual/Types/resources.html#collection">Resource Collections</a> that should be added to the set of jar libraries that make up the runtime dependency classpath of the application.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="spring-boot-ant-exejar-examples"><a class="anchor" href="#spring-boot-ant-exejar-examples"></a>3.1.2. Examples</h4>
<div class="paragraph">
<p>This section shows two examples of Ant tasks.</p>
</div>
<div class="listingblock">
<div class="title">Specify start-class</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;spring-boot:exejar destfile="target/my-application.jar"
        classes="target/classes" start-class="com.example.MyApplication"&gt;
    &lt;resources&gt;
        &lt;fileset dir="src/main/resources" /&gt;
    &lt;/resources&gt;
    &lt;lib&gt;
        &lt;fileset dir="lib" /&gt;
    &lt;/lib&gt;
&lt;/spring-boot:exejar&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Detect start-class</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;exejar destfile="target/my-application.jar" classes="target/classes"&gt;
    &lt;lib&gt;
        &lt;fileset dir="lib" /&gt;
    &lt;/lib&gt;
&lt;/exejar&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-boot-ant-findmainclass"><a class="anchor" href="#spring-boot-ant-findmainclass"></a>3.2. <code>spring-boot:findmainclass</code></h3>
<div class="paragraph">
<p>The <code>findmainclass</code> task is used internally by <code>exejar</code> to locate a class declaring a <code>main</code>.
If necessary, you can also use this task directly in your build.
The following attributes are supported:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>classesroot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The root directory of Java class files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes <em>(unless <code>mainclass</code> is specified)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mainclass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can be used to short-circuit the <code>main</code> class search</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Ant property that should be set with the result</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No <em>(result will be logged if unspecified)</em></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="spring-boot-ant-findmainclass-examples"><a class="anchor" href="#spring-boot-ant-findmainclass-examples"></a>3.2.1. Examples</h4>
<div class="paragraph">
<p>This section contains three examples of using <code>findmainclass</code>.</p>
</div>
<div class="listingblock">
<div class="title">Find and log</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;findmainclass classesroot="target/classes" /&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Find and set</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;findmainclass classesroot="target/classes" property="main-class" /&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Override and set</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;findmainclass mainclass="com.example.MainClass" property="main-class" /&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-tool-plugins-other-build-systems"><a class="anchor" href="#build-tool-plugins-other-build-systems"></a>4. Supporting Other Build Systems</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to use a build tool other than Maven, Gradle, or Ant, you likely need to develop your own plugin.
Executable jars need to follow a specific format and certain entries need to be written in an uncompressed form (see the &#8220;<a href="appendix-executable-jar-format.html#executable-jar">executable jar format</a>&#8221; section in the appendix for details).</p>
</div>
<div class="paragraph">
<p>The Spring Boot Maven and Gradle plugins both make use of <code>spring-boot-loader-tools</code> to actually generate jars.
If you need to, you may use this library directly.</p>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-repackaging-archives"><a class="anchor" href="#build-tool-plugins-repackaging-archives"></a>4.1. Repackaging Archives</h3>
<div class="paragraph">
<p>To repackage an existing archive so that it becomes a self-contained executable archive, use <code>org.springframework.boot.loader.tools.Repackager</code>.
The <code>Repackager</code> class takes a single constructor argument that refers to an existing jar or war archive.
Use one of the two available <code>repackage()</code> methods to either replace the original file or write to a new destination.
Various settings can also be configured on the repackager before it is run.</p>
</div>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-nested-libraries"><a class="anchor" href="#build-tool-plugins-nested-libraries"></a>4.2. Nested Libraries</h3>
<div class="paragraph">
<p>When repackaging an archive, you can include references to dependency files by using the <code>org.springframework.boot.loader.tools.Libraries</code> interface.
We do not provide any concrete implementations of <code>Libraries</code> here as they are usually build-system-specific.</p>
</div>
<div class="paragraph">
<p>If your archive already includes libraries, you can use <code>Libraries.NONE</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-find-a-main-class"><a class="anchor" href="#build-tool-plugins-find-a-main-class"></a>4.3. Finding a Main Class</h3>
<div class="paragraph">
<p>If you do not use <code>Repackager.setMainClass()</code> to specify a main class, the repackager uses <a href="https://asm.ow2.io/">ASM</a> to read class files and tries to find a suitable class with a <code>public static void main(String[] args)</code> method.
An exception is thrown if more than one candidate is found.</p>
</div>
</div>
<div class="sect2">
<h3 id="build-tool-plugins-repackage-implementation"><a class="anchor" href="#build-tool-plugins-repackage-implementation"></a>4.4. Example Repackage Implementation</h3>
<div class="paragraph">
<p>The following example shows a typical repackage implementation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Repackager repackager = new Repackager(sourceJarFile);
repackager.setBackupSource(false);
repackager.repackage(new Libraries() {
            @Override
            public void doWithLibraries(LibraryCallback callback) throws IOException {
                // Build system specific implementation, callback for each dependency
                // callback.library(new Library(nestedFile, LibraryScope.COMPILE));
            }
        });</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-tool-plugins-whats-next"><a class="anchor" href="#build-tool-plugins-whats-next"></a>5. What to Read Next</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are interested in how the build tool plugins work, you can look at the <a href="https://github.com/spring-projects/spring-boot/tree/v2.2.2.RELEASE/spring-boot-project/spring-boot-tools"><code>spring-boot-tools</code></a> module on GitHub.
More technical details of the executable jar format are covered in <a href="appendix-executable-jar-format.html#executable-jar">the appendix</a>.</p>
</div>
<div class="paragraph">
<p>If you have specific build-related questions, you can check out the &#8220;<a href="howto.html#howto">how-to</a>&#8221; guides.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-12-06 06:37:25 UTC
</div>
</div>
<script type="text/javascript" src="js/tocbot/tocbot.min.js"></script>
<script type="text/javascript" src="js/toc.js"></script>
<link rel="stylesheet" href="js/highlight/styles/github.min.css">
<script src="js/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
<script>if(window.parent==window){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-2728886-23','auto',{'siteSpeedSampleRate':100});ga('send','pageview');}</script></body>
</html>